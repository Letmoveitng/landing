import { useState, useEffect } from 'react'
import RadioGroup from "./utils/radioGroup"
import Autocomplete from "./utils/autocomplete"
import { setMoveCookie } from "@utils/cookies"

const options = [
  { id: "1", label: "Residential", svg: <svg className="w-[.9vw] max-md:w-[2.5vw] h-auto" xmlns="http://www.w3.org/2000/svg" width="12" height="11" viewBox="0 0 12 11" fill="currentColor"><path d="M4.35 10.7C4.59853 10.7 4.8 10.4985 4.8 10.25V7.55C4.8 7.30147 5.00147 7.1 5.25 7.1H6.75C6.99853 7.1 7.2 7.30147 7.2 7.55V10.25C7.2 10.4985 7.40147 10.7 7.65 10.7H9.75C9.99853 10.7 10.2 10.4985 10.2 10.25V6.35C10.2 6.10147 10.4015 5.9 10.65 5.9H10.8273C11.2397 5.9 11.4349 5.39141 11.1284 5.11552L6.30103 0.770931C6.1299 0.616907 5.8701 0.616907 5.69897 0.770931L0.871647 5.11552C0.565099 5.39141 0.760264 5.9 1.17268 5.9H1.35C1.59853 5.9 1.8 6.10147 1.8 6.35V10.25C1.8 10.4985 2.00147 10.7 2.25 10.7H4.35Z"/></svg> },
  { id: "2", label: "Business", svg: <svg className="w-[.9vw] max-md:w-[2.5vw] h-auto" xmlns="http://www.w3.org/2000/svg" width="11" height="10" viewBox="0 0 11 10" fill="currentColor"><path d="M0.157036 4.38783C0.0584871 4.45822 0 4.57188 0 4.69298V9.125C0 9.33211 0.167893 9.5 0.375 9.5H2.125C2.33211 9.5 2.5 9.33211 2.5 9.125V6.875C2.5 6.66789 2.66789 6.5 2.875 6.5H4.125C4.33211 6.5 4.5 6.66789 4.5 6.875V9.125C4.5 9.33211 4.66789 9.5 4.875 9.5H6.625C6.83211 9.5 7 9.33211 7 9.125V4.69298C7 4.57188 6.94151 4.45822 6.84296 4.38783L3.71796 2.15569C3.58758 2.06256 3.41242 2.06256 3.28204 2.15569L0.157036 4.38783Z"/><path d="M4.875 0.5C4.66789 0.5 4.5 0.667893 4.5 0.875V1.29202C4.5 1.41312 4.55849 1.52678 4.65704 1.59717L7.85761 3.88329C7.94697 3.94712 8 4.05017 8 4.15998C8 4.34777 8.15223 4.5 8.34002 4.5H8.625C8.83211 4.5 9 4.66789 9 4.875V5.125C9 5.33211 8.83211 5.5 8.625 5.5H8.375C8.16789 5.5 8 5.66789 8 5.875V6.125C8 6.33211 8.16789 6.5 8.375 6.5H8.625C8.83211 6.5 9 6.66789 9 6.875V7.125C9 7.33211 8.83211 7.5 8.625 7.5H8.375C8.16789 7.5 8 7.66789 8 7.875V9.125C8 9.33211 8.16789 9.5 8.375 9.5H10.625C10.8321 9.5 11 9.33211 11 9.125V0.875C11 0.667893 10.8321 0.5 10.625 0.5H4.875ZM9 3.125C9 3.33211 8.83211 3.5 8.625 3.5H8.375C8.16789 3.5 8 3.33211 8 3.125V2.875C8 2.66789 8.16789 2.5 8.375 2.5H8.625C8.83211 2.5 9 2.66789 9 2.875V3.125Z"/></svg> },
  { id: "3", label: "Item delivery", svg: <svg className="w-[.9vw] max-md:w-[2.5vw] h-auto" xmlns="http://www.w3.org/2000/svg" width="11" height="8" viewBox="0 0 11 8" fill="currentColor"><path d="M5.39887 7.27213H6.5191C6.82716 7.27213 7.07921 7.02008 7.07921 6.71202C7.07921 6.40396 6.82716 6.15191 6.5191 6.15191H5.39887C5.09081 6.15191 4.83876 6.40396 4.83876 6.71202C4.83876 7.02008 5.09081 7.27213 5.39887 7.27213ZM0.917969 1.11089C0.917969 1.41896 1.17002 1.67101 1.47808 1.67101H10.4399C10.7479 1.67101 11 1.41896 11 1.11089C11 0.802832 10.7479 0.550781 10.4399 0.550781H1.47808C1.17002 0.550781 0.917969 0.802832 0.917969 1.11089ZM3.15842 4.47157H8.75955C9.06761 4.47157 9.31966 4.21952 9.31966 3.91146C9.31966 3.6034 9.06761 3.35135 8.75955 3.35135H3.15842C2.85036 3.35135 2.59831 3.6034 2.59831 3.91146C2.59831 4.21952 2.85036 4.47157 3.15842 4.47157Z"/></svg> },
];
    
export default function EstimatorTool() {
    const [pickup,setPickup] = useState("");
    const [dropoff,setDropoff] = useState("");
    const [moveType, setMoveType] = useState("");

    return (
        <div className="w-[30.5vw] max-md:w-full mt-2">

            <RadioGroup
                options={options}
                onChange={(value) => setMoveType(value)}
            />


            <div className="w-full flex flex-col mt-4 max-md:space-y-2">
                <Autocomplete 
                    value={pickup} 
                    svg={<svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" viewBox="0 0 14 15" fill="none"><path d="M12.6891 6.86364C12.3964 4.21 10.29 2.10364 7.63636 1.81091V0.5H6.36364V1.81091C3.71 2.10364 1.60364 4.21 1.31091 6.86364H0V8.13636H1.31091C1.60364 10.79 3.71 12.8964 6.36364 13.1891V14.5H7.63636V13.1891C10.29 12.8964 12.3964 10.79 12.6891 8.13636H14V6.86364H12.6891ZM7 11.9545C4.53727 11.9545 2.54545 9.96273 2.54545 7.5C2.54545 5.03727 4.53727 3.04545 7 3.04545C9.46273 3.04545 11.4545 5.03727 11.4545 7.5C11.4545 9.96273 9.46273 11.9545 7 11.9545Z" fill="black" fillOpacity="0.6"/></svg>}
                    delay="200"
                    setValue={setPickup} placeholder="Pickup" 
                    />
                <Autocomplete 
                    value={dropoff} 
                    svg={<svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none"><path d="M5.70701 7.63376C6.09936 7.63376 6.43536 7.49394 6.71501 7.21429C6.99417 6.93513 7.13376 6.59936 7.13376 6.20701C7.13376 5.81465 6.99417 5.47865 6.71501 5.19901C6.43536 4.91984 6.09936 4.78025 5.70701 4.78025C5.31465 4.78025 4.97889 4.91984 4.69972 5.19901C4.42008 5.47865 4.28025 5.81465 4.28025 6.20701C4.28025 6.59936 4.42008 6.93513 4.69972 7.21429C4.97889 7.49394 5.31465 7.63376 5.70701 7.63376ZM5.70701 14.5C5.61189 14.5 5.51677 14.4822 5.42166 14.4465C5.32654 14.4108 5.24331 14.3633 5.17197 14.3038C3.43609 12.7701 2.14013 11.3464 1.28408 10.0328C0.428026 8.7188 0 7.49108 0 6.34968C0 4.56624 0.573792 3.14544 1.72138 2.08726C2.86848 1.02909 4.19703 0.5 5.70701 0.5C7.21699 0.5 8.54553 1.02909 9.69264 2.08726C10.8402 3.14544 11.414 4.56624 11.414 6.34968C11.414 7.49108 10.986 8.7188 10.1299 10.0328C9.27389 11.3464 7.97792 12.7701 6.24204 14.3038C6.1707 14.3633 6.08747 14.4108 5.99236 14.4465C5.89724 14.4822 5.80212 14.5 5.70701 14.5Z" fill="black" fillOpacity="0.6"/></svg>}
                    delay="400"
                    setValue={setDropoff} 
                    placeholder="Dropoff" 
                />
                <a 
                    onClick={(e) => {
                        e.preventDefault();  // optional, if you want to handle navigation yourself
                        setMoveCookie(pickup, dropoff, moveType);
                        window.location.href = process.env.NEXT_PUBLIC_ESTIMATOR_URL!;
                    }}
                    className="slide-animate-y opacity-0 translate-y-[50px] duration-600 delay-400 transition-all ease-out w-full mt-4 max-md:mt-6 bg-[var(--primary)] p-3.5 max-md:p-5 font-medium text-[15px] text-white text-center cursor-pointer rounded-xl hover:animate-[gradient_0.3s_ease-in-out] active:animate-[active_0.2s_ease-in-out]"
                >Find Truck</a>
            </div>
        </div>
    )
}